<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Shield | Aegis Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');
        body { font-family: 'Space Mono', monospace; background-color: #0a0a0a; color: #00ff41; }
        .gold-glow { box-shadow: 0 0 15px rgba(255, 215, 0, 0.3); border: 1px solid #ffd700; }
    </style>
</head>
<body class="p-8">
    <div class="max-w-4xl mx-auto">
        <header class="mb-12 border-b border-green-900 pb-4">
            <h1 class="text-3xl font-bold tracking-tighter">THE SHIELD PROTOCOL <span class="text-xs bg-green-900 px-2 py-1">V4.2.1</span></h1>
            <p class="text-sm opacity-60">Status: All Systems Operational | Base Sepolia Network</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
            <div class="p-6 border border-green-900 bg-black">
                <h2 class="text-xl mb-4 font-bold">üõ°Ô∏è Agent Validator</h2>
                <input id="botIdInput" type="text" placeholder="Enter Bot ID (e.g., V3_Test_Bot)" class="w-full bg-transparent border border-green-900 p-2 mb-4 outline-none focus:border-green-400">
                <button onclick="checkAgent()" class="w-full bg-green-900 text-black font-bold p-2 hover:bg-green-400 transition">QUERY_CREDIT</button>
            </div>

            <div id="resultPanel" class="p-6 border border-green-900 bg-black opacity-50">
                <h2 class="text-xl mb-4 font-bold">üì° Live Status</h2>
                <div id="statusContent">Waiting for query...</div>
            </div>
        </div>

        <div class="border border-green-900 p-6">
            <h2 class="text-xl mb-4 font-bold underline">üèÜ Global Credit Ranking</h2>
            <div class="space-y-4" id="rankingBoard">
                <div class="flex justify-between p-3 gold-glow bg-black">
                    <span>V3_Test_Bot</span>
                    <span class="text-yellow-500 font-bold">GOLD_TIER (2)</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const CONTRACT_ADDRESS = "0x9b9332c7D601601E3bDBfA626dc65F33FCCDD644";
        
        async function checkAgent() {
            const botId = document.getElementById('botIdInput').value;
            const content = document.getElementById('statusContent');
            const panel = document.getElementById('resultPanel');
            
            content.innerHTML = "FETCHING_FROM_BASE...";
            panel.classList.remove('opacity-50');

            try {
                const response = await fetch(`https://bothire-shield-gateway.kwailapt.workers.dev/?botId=${botId}`, {
                    headers: { 'X-402-Shield-Token': 'Shield-V4.2-AUTH' }
                });
                const data = await response.json();
                
                content.innerHTML = `
                    <p>STATUS: <span class="${data.access === 'GRANTED' ? 'text-green-400' : 'text-red-500'}">${data.access}</span></p>
                    <p>TIER: ${data.tier}</p>
                    <p>ID: ${data.botId}</p>
                    <p class="text-xs mt-4 opacity-50">VERIFIED_AT: ${new Date(data.timestamp).toLocaleTimeString()}</p>
                `;
            } catch (err) {
                content.innerHTML = "QUERY_FAILED";
            }
        }
    </script>
</body>
</html>
